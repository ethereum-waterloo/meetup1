<h1>Voting App!</h1>
<h4> Your Address is: </h4>
<p id = accountAddr></p>
<h4> Enter Contract Addr</h4>
<input type="text" id="contractAddrInput" value="Give Addr"></input>
<button id="changeAddrContract">Change Contract Location</button>
<input type="text" id="newPersonField" value="Give Addr"></input>
<button id="addPeopleButton">Change Contract Location</button>
<div id="buttons">
    <button id="monday">Monday</button>
    <button id="Tuesday">Tuesday</button>
    <button id="Wednesday">Wednesday</button>
    <button id="Thursday">Thursday</button>
    <button id="Friday">Friday</button>
</div>

<span id="options"></span>
<button id="addOpts">Add Options</button>
<button id="submit">Submit</button>


<script type="text/javascript" src="web3.min.js"></script>
<script type="text/javascript">
var accounts;
var bytecode = "606060405234610000575b33600060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060016003819055505b5b6109fb806100646000396000f30060606040523615610097576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168063013cf08b1461009c5780630b1ca49a146101725780632e4176cf146101a55780634f24186a146101f4578063a3ec138d1461024b578063b384abef14610296578063ca6d56dc146102bc578063d8ad8261146102ef578063de2e19a014610312575b610000565b34610000576100b7600480803590602001909190505061034c565b604051808060200187815260200186815260200185815260200184815260200183815260200182810382528881815460018160011615610100020316600290048152602001915080546001816001161561010002031660029004801561015e5780601f106101335761010080835404028352916020019161015e565b820191906000526020600020905b81548152906001019060200180831161014157829003601f168201915b505097505050505050505060405180910390f35b34610000576101a3600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610394565b005b34610000576101b261045f565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b3461000057610249600480803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091905050610485565b005b346100005761027c600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190505061069f565b604051808215151515815260200191505060405180910390f35b34610000576102ba60048080359060200190919080359060200190919050506106bf565b005b34610000576102ed600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190505061085d565b005b34610000576102fc610927565b6040518082815260200191505060405180910390f35b34610000576103366004808035906020019091908035906020019091905050610932565b6040518082815260200191505060405180910390f35b600281815481101561000057906000526020600020906006020160005b9150905080600001908060010154908060020154908060030154908060040154908060050154905086565b600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156103f057610000565b6000600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908315150217905550600360008154809291906001900391905055505b50565b600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60c06040519081016040528060206040519081016040528060008152508152602001600081526020016000815260200160008152602001600081526020016000815250818160000181905250600280548060010182818154818355818115116105a4576006028160060283600052602060002091820191016105a391905b8082111561059f57600060008201805460018160011615610100020316600290046000825580601f10610536575061056d565b601f01602090049060005260206000209081019061056c91905b80821115610568576000816000905550600101610550565b5090565b5b506001820160009055600282016000905560038201600090556004820160009055600582016000905550600601610503565b5090565b5b505050916000526020600020906006020160005b8390919091506000820151816000019080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061061057805160ff191683800117855561063e565b8280016001018555821561063e579182015b8281111561063d578251825591602001919060010190610622565b5b50905061066391905b8082111561065f576000816000905550600101610647565b5090565b50506020820151816001015560408201518160020155606082015181600301556080820151816004015560a082015181600501555050505b5050565b60016020528060005260406000206000915054906101000a900460ff1681565b60001515600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff161515141561071d57610000565b600181141561075c57600282815481101561000057906000526020600020906006020160005b5060010160008154809291906001019190505550610858565b600281141561079b57600282815481101561000057906000526020600020906006020160005b5060020160008154809291906001019190505550610857565b60038114156107da57600282815481101561000057906000526020600020906006020160005b5060030160008154809291906001019190505550610856565b600481141561081957600282815481101561000057906000526020600020906006020160005b5060040160008154809291906001019190505550610855565b600581141561085457600282815481101561000057906000526020600020906006020160005b50600501600081548092919060010191905055505b5b5b5b5b5b5050565b600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156108b957610000565b6001600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055506003600081548092919060010191905055505b50565b600060035490505b90565b60006000600284815481101561000057906000526020600020906006020160005b509050600184141561096b57806001015491506109c8565b600284141561098057806002015491506109c8565b600384141561099557806003015491506109c8565b60048414156109aa57806004015491506109c8565b60058414156109bf57806001015491506109c8565b5b5b5b5b600091505b50929150505600a165627a7a72305820a71d888b513a086535f0d92e2be8e9b7e5d5c9c8d9cb3314bee493ae3b05751b0029";
var contractABI = [{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"proposals","outputs":[{"name":"name","type":"string"},{"name":"monday","type":"uint256"},{"name":"tuesday","type":"uint256"},{"name":"wednesday","type":"uint256"},{"name":"thursday","type":"uint256"},{"name":"friday","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"addr","type":"address"}],"name":"removeMember","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"chairperson","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"name","type":"string"}],"name":"newProposal","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"voters","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"proposalID","type":"uint256"},{"name":"day","type":"uint256"}],"name":"vote","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"addr","type":"address"}],"name":"addMember","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"numOfPeople","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"proposalID","type":"uint256"},{"name":"day","type":"uint256"}],"name":"getVoteCount","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"inputs":[],"payable":false,"type":"constructor"}];

var el = function(id){ return document.querySelector(id); };

if (typeof web3 !== 'undefined') {
    web3 = new Web3(web3.currentProvider);
    accounts = web3.eth.accounts;
    el('#accountAddr').innerHTML = accounts[0];
} else {
    web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
    accounts = web3.eth.accounts;
    el('#accountAddr').innerHTML = accounts[0];
}
var VoteAppInstance = web3.eth.contract(contractABI).at("0x850A3449D25Fadc3df56DE31C403FB4D538665C0");

VoteAppInstance.numOfPeople((err, res) =>{
  console.log(parseInt(res));
});

/*VoteAppInstance.addMember("0x2D2A96CBf67C7DF18F00dCA231164db5a4fE3859", {from: accounts[0] }, (err, res) => {
  console.log(res);
});*/
console.log(parseInt(VoteAppInstance.numOfPeople.call()));
el('#changeAddrContract').addEventListener('click', function(){
    VoteAppInstance = VoteApp.at(el('#contractAddrInput').value);
});

el('#addPeopleButton').addEventListener('click',function(){
  VoteAppInstance.addMember( el('#newPersonField').value, {from: accounts[0]}, (err, res) => {
      console.log("someone added ", res);
  })
})

el('#monday').addEventListener('click', function(){
    console.log("Monday");
});
el('#tuesday').addEventListener('click', function(){
    console.log("Tues");
});
el('#wednesday').addEventListener('click', function(){
    console.log("Wed");
});
el('#thursday').addEventListener('click', function(){
    console.log("Thurs");
});
el('#friday').addEventListener('click', function(){
    console.log("Fri");
});
el('#submit').addEventListener('click', function(){
    el('#options').style.display = "none";
});
var countBox = 1;
var boxName = 0;

el('#addOpts').addEventListener('click', function(){
    console.log(countBox);
    console.log(boxName);
    var boxName="textBox"+countBox;
    el('#options').innerHTML+='<br/><input type="text" id="'+boxName+'" value="'+boxName+'" "  /><br/>';
    countBox += 1;
    // el('#buttons').style.display = "none";
});

</script>
